---
- name: install package
  community.general.openbsd_pkg:
    name: heartbeat
    state: present

- name: install configuration
  ansible.builtin.template:
    src: heartbeat.yml.j2
    dest: /etc/heartbeat/heartbeat.yml
    owner: root
    group: wheel
    mode: 0444
    validate: /usr/local/bin/heartbeat test config -c %s
  notify: restart heartbeat

- name: enable and start service
  ansible.builtin.service:
    name: heartbeat
    enabled: true
    state: started
