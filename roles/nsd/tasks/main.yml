# roles/nsd/tasks/main
---
- name: install package
  package: name=nsd state=present

- name: install zone files
  template:
    src=zones/{{ item }}.j2 dest=/etc/nsd/{{ item }}.zone
    owner=root group=root mode=0444
    validate='nsd-checkzone {{ item }} %s'
  with_items:
    - leavethegun.com
    - osborn.io
    - osborn.ws
  notify: reload nsd

- name: install NSD configuration file
  template:
    src=nsd.conf.j2 dest=/etc/nsd/nsd.conf
    owner=root group=root mode=0444
    validate='nsd-checkconf %s'
  notify: reload nsd

- name: Name Server Daemon (NSD)
  service: name=nsd enabled=yes state=started
...
