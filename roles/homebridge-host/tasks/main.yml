# roles/homebridge-guest/tasks/main
---
- name: create directories
  file:
    path: "{{ item }}"
    owner: root
    group: wheel
    mode: 0750
    state: directory
  with_items:
    - /home/_homebridge

- command: vmctl create -s 6G /home/_homebridge/alpine-virt.img
  args:
    creates: /home/_homebridge/alpine-virt.img

- get_url:
    url: http://dl-cdn.alpinelinux.org/alpine/v3.9/releases/x86_64/alpine-virt-3.9.4-x86_64.iso
    checksum: sha256:4122dce1092564aa88415c21702d6cb973a7d29f91658d24316f7f0aac3a6761
    dest: /home/_homebridge/alpine-virt-3.9.4-x86_64.iso
    owner: root
    group: wheel
    mode: 0440
