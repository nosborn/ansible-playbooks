---
- name: "get device state : {{ rfkill_item }}"
  ansible.builtin.command:
    argv:
      - rfkill
      - list
      - --noheadings
      - --output=SOFT
      - "{{ rfkill_item }}"
  register: rfkill_result
  changed_when: false

- name: "block device : {{ rfkill_item }}"
  ansible.builtin.command:
    argv:
      - rfkill
      - block
      - "{{ rfkill_item }}"
  when: rfkill_result.stdout == 'unblocked'
