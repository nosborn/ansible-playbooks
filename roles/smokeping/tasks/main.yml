---
- name: install smokeping
  ansible.builtin.package:
    name: smokeping
    state: present

- name: configure smokeping
  ansible.builtin.template:
    src: config.j2
    dest: /etc/smokeping/config
    owner: root
    group: wheel
    mode: 0444
  notify: restart smokeping

- name: enable and start smokeping
  ansible.builtin.service:
    name: "{{ item }}"
    enabled: true
    state: started
  loop:
    - smokeping
    - smokeping_fcgi
