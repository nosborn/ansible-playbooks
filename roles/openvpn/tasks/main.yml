# roles/openvpn/tasks/main
---
- name: install package
  openbsd_pkg:
    name: openvpn--
    state: present

- name: create configuration directory
  file:
    path: "{{ openvpn_config_dir }}"
    owner: root
    group: wheel
    mode: 0755
    state: directory

- name: install authentication configuration file
  copy:
    content: "{{ openvpn_client_auth_user_pass }}"
    dest: "{{ openvpn_client_auth_user_pass_file }}"
    owner: root
    group: wheel
    mode: 0400
# notify: restart netstart

- name: install configuration file
  template:
    src: client.conf.j2
    dest: "{{ openvpn_client_config_file }}"
    owner: root
    group: wheel
    mode: 0440
# notify: restart netstart

# - name: install interface-specific configuration file
#   template:
#     src: hostname.if.j2
#     dest: /etc/hostname.{{ openvpn_client_if }}
#     owner: root
#     group: wheel
#     mode: 0440
#   notify: restart netstart
...
