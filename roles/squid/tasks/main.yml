# roles/squid/tasks/main
---
- name: install WWW and FTP proxy cache and accelerator
  openbsd_pkg: name=squid state=installed

- name: configure HTTP web proxy caching server
  template:
    src=squid.conf.j2 dest=/etc/squid/squid.conf
    owner=root group=wheel mode=0444
    validate='/usr/local/sbin/squid -f %s -k parse'
  notify: restart squid

- name: start squid
  service: name=squid enabled=yes state=started
...
