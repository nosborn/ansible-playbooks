# roles/nginx/tasks/site
---
- include: roles/letsencrypt/tasks/domain.yml domain={{ name }}
  notify: restart nginx

- file:
    path={{ item }} state=directory
    owner=root group=wheel mode=0775
  with_items:
    - /var/www/sites/{{ name }}

- template:
    src=site.conf.j2 dest=/etc/nginx/sites.d/{{ name }}.conf
    owner=root group=wheel mode=0444
  notify: restart nginx
...
